{% extends 'base.html.twig' %}

{% block title %}Kampagnendetails{% endblock %}

{% block body %}

    <div class="mb-4 d-flex justify-content-between">
        <div>
            <h1 class="mb-2">Kampagne {{ campaign.name }}</h1>
            <span
                id="campaign-lifecycle-badge"
                class="badge {{ campaign.lifecycle.value == 'active' ? 'bg-success' : 'bg-secondary' }}">{{ campaign.lifecycle.value|capitalize }}</span>
            <span
                class="badge {{ campaign.status.badgeClass }}">{{ campaign.status.value }}</span>
        </div>

        <form
            action="{{ path('app_campaign_toggle_lifecycle', {id: campaign.id}) }}"
            method="post"
            id="form-campaign-lifecycle"
        >
            <input type="hidden" name="_token" value="{{ csrf_token('lifecycle' ~ campaign.id) }}">
            <div class="form-check form-switch">
                <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    value="{{ campaign.lifecycle.value == 'active' ? '1' : '0' }}"
                    id="toggle-switch-lifecycle" {{ campaign.lifecycle.value == 'active' ? 'checked' : '' }}>
                <label class="form-check-label" for="toggle-switch-lifecycle" id="toggle-switch-lifecycle-lable">
                    {{ campaign.lifecycle.value == 'active' ? 'Archivieren' : 'Aktivieren' }}
                </label>
            </div>
        </form>

    </div>

    <table class="table mb-4">
        <tbody>
        <tr>
            <th>Kampagne</th>
            <td>{{ campaign.name }}</td>
        </tr>
        <tr>
            <th>Plattform</th>
            <td>{{ campaign.platform }}</td>
        </tr>
        <tr>
            <th>Kunde</th>
            <td>{{ campaign.client }}</td>
        </tr>
        <tr>
            <th>Budget</th>
            <td>CHF {{ campaign.budget }}</td>
        </tr>
        <tr>
            <th>Startdatum</th>
            <td>{{ campaign.startDate ? campaign.startDate|date('d. F Y') : '' }}</td>
        </tr>
        <tr>
            <th>Enddatum</th>
            <td>{{ campaign.endDate ? campaign.endDate|date('d. F Y') : '' }}</td>
        </tr>

        {% if campaign.startDate and campaign.endDate %}
            <tr>
                <th>Laufzeit</th>
                <td>{{ date(campaign.endDate).diff(date(campaign.startDate)).days + 1 }} Tage</td>
            </tr>
        {% endif %}

        <tr>
            <th>Projektleiter/in</th>
            <td>{{ campaign.projectManager }}</td>
        </tr>
        <tr>
            <th>Owner Kampagne</th>
            <td>{{ campaign.campaignOwner }}</td>
        </tr>
        </tbody>
    </table>

    <div class="btn-group">
        <a class="btn btn-outline-primary" href="{{ path('app_campaign_index') }}">Zur√ºck</a>
        <a class="btn btn-outline-primary" href="{{ path('app_campaign_edit', {'id': campaign.id}) }}">Bearbeiten</a>
    </div>

{% endblock %}
